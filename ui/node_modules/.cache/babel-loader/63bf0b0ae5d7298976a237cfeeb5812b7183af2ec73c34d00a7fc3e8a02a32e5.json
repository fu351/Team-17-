{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UploadPackage=()=>{const[packageName,setPackageName]=useState('');const[file,setFile]=useState(null);const handleFileChange=e=>{if(e.target.files){setFile(e.target.files[0]);}};const getBase64=file=>{return new Promise(resolve=>{let fileInfo;let baseURL=\"\";// Make new FileReader\nlet reader=new FileReader();// Convert the file to base64 text\nreader.readAsDataURL(file);// on reader load somthing...\nreader.onload=()=>{// Make a fileInfo Object\nconsole.log(\"Called\",reader);baseURL=reader.result;console.log(baseURL);resolve(baseURL);};return fileInfo.base64;});};const handleUpload=async()=>{if(file){console.log(\"Uploading file...\");const formData=new FormData();formData.append(\"file\",file);formData.append('name',packageName);formData.append(\"Content\",getBase64(file));try{const result=await fetch(\"http://3.12.123.204:3000/package\",{method:\"POST\",body:formData,headers:{// Add your X-Authorization header here with the appropriate token value\n'X-Authorization':'000921'}});const data=await result.json();console.log(data);}catch(error){console.error(error);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Package\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Package Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:packageName,onChange:e=>setPackageName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",name:\"file\",onChange:handleFileChange,accept:\".zip\",required:true,\"aria-label\":\"Choose file\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleUpload,\"aria-label\":\"Upload package\",children:\"Upload\"})]});};export default UploadPackage;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","UploadPackage","packageName","setPackageName","file","setFile","handleFileChange","e","target","files","getBase64","Promise","resolve","fileInfo","baseURL","reader","FileReader","readAsDataURL","onload","console","log","result","base64","handleUpload","formData","FormData","append","fetch","method","body","headers","data","json","error","children","htmlFor","type","id","value","onChange","required","name","accept","onClick"],"sources":["/Users/shreyarathi/finalfs/Team-17-/ui/src/components/UploadPackage.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst UploadPackage = () => {\n  const [packageName, setPackageName] = useState('');\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = (e) => {\n    if (e.target.files) {\n      setFile(e.target.files[0]);\n    }\n  };\n\n  const getBase64 = file => {\n    return new Promise(resolve => {\n      let fileInfo;\n      let baseURL = \"\";\n      // Make new FileReader\n      let reader = new FileReader();\n\n      // Convert the file to base64 text\n      reader.readAsDataURL(file);\n\n      // on reader load somthing...\n      reader.onload = () => {\n        // Make a fileInfo Object\n        console.log(\"Called\", reader);\n        baseURL = reader.result;\n        console.log(baseURL);\n        resolve(baseURL);\n      };\n      return fileInfo.base64;\n    });\n  };\n\n  const handleUpload = async () => {\n    if (file) {\n      console.log(\"Uploading file...\");\n\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append('name', packageName);\n      formData.append(\"Content\", getBase64(file));\n\n      try {\n        const result = await fetch(\"http://3.12.123.204:3000/package\", {\n          method: \"POST\",\n          body: formData,\n          headers: {\n            // Add your X-Authorization header here with the appropriate token value\n            'X-Authorization': '000921',\n          },\n        });\n\n        const data = await result.json();\n\n        console.log(data);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  return (\n    <div>\n      <h2>Upload Package</h2>\n      <label htmlFor=\"name\">Package Name:</label>\n      <input\n        type=\"text\"\n        id=\"name\"\n        value={packageName}\n        onChange={(e) => setPackageName(e.target.value)}\n        required\n      />\n      <input\n        type=\"file\"\n        id=\"file\"\n        name=\"file\"\n        onChange={handleFileChange}\n        accept=\".zip\"\n        required\n        aria-label=\"Choose file\"\n      />\n      <button type=\"button\" onClick={handleUpload} aria-label=\"Upload package\">\n        Upload\n      </button>\n    </div>\n  );\n};\n\nexport default UploadPackage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}